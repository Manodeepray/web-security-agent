{% extends "layout.html" %}

{% block content %}
<h2>ğŸ“‡ All Contacts</h2>

<a href="{{ url_for('add_contact') }}">â• Add New Contact</a>

<form action="{{ url_for('search_contacts') }}" method="get" style="margin-top: 10px;">
    <input type="text" name="query" placeholder="Search by name...">
    <button type="submit">ğŸ” Search</button>
</form>

{% if contacts %}
    <ul>
    {% for contact in contacts.values() %}
        <li>
            <strong>{{ contact.name }}</strong> â€” {{ contact.email }}
            <br>
            Notes: {{ contact.notes | safe }} <!-- ğŸ§¨ XSS rendering point -->
            <br>
            <a href="{{ url_for('edit_contact', id=contact.id) }}">âœï¸ Edit</a> |
            <a href="{{ url_for('delete_contact', id=contact.id) }}">ğŸ—‘ï¸ Delete</a>
        </li>
        <hr>
    {% endfor %}
    </ul>
{% else %}
    <p>No contacts found.</p>
{% endif %}
{% endblock %}
